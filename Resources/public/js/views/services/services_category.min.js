function initializeServiceCategoryView(a){a.ServiceCategoriesView=Backbone.View.extend({activeCat:null,activeWorkers:[],categories:null,activeWorkersInit:function(){this.activeWorkers=_.toArray(this.categories.get(this.activeCat).get("workers"))},initialize:function(b){this.categories=b.categories;this.activeCat=this.$el.find("li.act a").attr("data-cat");this.activeWorkersInit();this.$el.find("a.service").click(function(d){d.preventDefault();this.$el.find(".menu ul li.act").removeClass("act");$(d.target).parent().addClass("act");var c=$(d.target).attr("data-cat");this.activateCat(c)}.bind(this));this.activateCat(this.activeCat);rivets.bind(this.el,this);this.$el.find(".submenu.hidden").removeClass("hidden")},getActiveCategory:function(){return this.categories.get(this.activeCat)},masterClick:function(d,c){d.preventDefault();var f=this.getActiveCategory(c).get("workers");if($(d.target).hasClass("active")){$(d.target).removeClass("active");f[$(d.target).attr("data-master")].active=false;var b=false;a.calendars.widget.checkMasters()}else{$(d.target).addClass("active");f[$(d.target).attr("data-master")].active=true;f[$(d.target).attr("data-master")].disable=false;a.calendar.widget.hideShadow(f)}a.jobTypesView.activate(f,c.activeCat)},clickParent:function(c,b){c.target=$(c.target).parent()[0];b.masterClick(c,b)},activateMaster:function(b){this.$el.find(".master-"+b).addClass("active")},disactivateMaster:function(b){this.$el.find(".master-"+b).removeClass("active")},activateCat:function(b){this.activeCat=b;_.each(this.activeWorkers,function(c,d){this.activeWorkers.pop()}.bind(this));_.each(this.categories.get(this.activeCat).get("workers"),function(c){this.activeWorkers[this.activeWorkers.length]=c}.bind(this));this.$el.find(".submenu.active").removeClass("active").addClass("hidden");this.$el.find(".submenu.cat-"+b).removeClass("hidden").addClass("active");this.$el.find(".submenu.cat-"+b+" .item a").addClass("active");_.each(this.categories.get(b).get("workers"),function(c){c.active=true});a.calendar.widget.setMasters(this.categories.get(b).get("workers"));a.jobTypesView.activate(this.categories.get(b).get("workers"),b);if(a.categoriesView){a.calendar.loadNotes()}this.activeWorkersInit()},activateJobType:function(b){_.each(this.categories.get(this.activeCat).get("workers"),function(c){})},disactivateCat:function(){this.activeCat=null;this.$el.find(".submenu.active").removeClass("active").addClass("hidden")},selectJobType:function(b){if(_.toArray(b).length==0){this.selectAll()}else{_.each(this.categories.get(this.activeCat).get("workers"),function(d){var c=false;_.each(b,function(e){var g=e.job;var f=e.type;if(d.types[f]){_.each(d.types[f].jobTypes,function(h){if(h.id==g){c=true}})}}.bind(this));d.active=c})}},selectAll:function(){_.each(this.categories.get(this.activeCat).get("workers"),function(b){b.active=true})}})};