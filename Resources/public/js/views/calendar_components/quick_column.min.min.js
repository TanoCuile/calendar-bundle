function initializeQuickColumn(b){b.QuickColumn=b.ColumnView.extend({initialize:function(a){this.interfaces=[];this.grid={};this.notes=[];this.buffers=[];this.calendarInfo=a.calendarInfo;this.calendarView=a.calendarView;if(a.date){this.date=a.date}else{this.date=this.calendarView.options.date}this.model=a.model;this.onNoteAdd=a.onNoteAdd},noteSetParameters:function(a,e,f){a.set("date",this.calendarView.options.date);a.set("duration",e);a.set("fromTime",f);a.set("bySite",this.calendarView.options.bySite)},initializeNote:function(a,e,f){if(b.ColumnView.validateNote(this.model,e,f,null,this.calendarView.options.date)){this.noteSetParameters(a,f,e);return this.initializeAddNoteView(a)}},initializeDefaultNote:function(d){var a=this.defaultDuration},getDefaultDuration:function(a){return a.data.currentDuration?a.data.currentDuration:a.column.view.defaultDuration},addNote:function(h,j){h.preventDefault(true);h.stopPropagation(true);var e=b.ColumnInfo.pixelsToTime(b.ColumnView.getDistance(h));var i=j.calendar.options.data.get("currentDay").get("fromTime")+e-e%15;if(!j.data.currentNoteView){var a=j.column.view.initializeNote(j.data.currentNote,i,j.column.view.getDefaultDuration(j))}else{j.column.view.noteSetParameters(j.data.currentNote,j.column.view.getDefaultDuration(j),i);var a=j.data.currentNoteView}if(a){j.column.showPopup=true;j.column.view.openedPopupsCount++;j.column.view.onNoteAdd.call(this,a)}},calculateBuffers:function(h){_.each(this.buffers,function(){this.buffers.pop()}.bind(this));delete this.grid.topBuffer;delete this.grid.bottomBuffer;if(h.get("active")&&this.calendarInfo.get("schedule").checkSupply(this.date)){var f=h.get("timeTo");var a=h.get("timeFrom");this.model.set("timeFrom",a);this.model.set("timeTo",f);var g=this.interfaces[0];g.show=true}else{var g=this.interfaces[0];g.show=false;this.buffers.push(this.initializeBuffer(0,b.ColumnInfo.timeToPixels(f-a)))}},drag:function(a,f,e){b.QuickColumn.onDrag(a,f,e)}},{onDrag:function(B,C,s){function z(d){var c=0;if(!d.calendarView.fromTime){c=d.calendarInfo.get("currentDay").get("fromTime")}else{c=d.calendarView.fromTime}if(c<d.model.get("timeFrom")){c=d.model.get("timeFrom")}return c}function a(e,d){var c=z(d.column);e.calculateTime(d.top,c)}function u(){return function(d,c){a(d,c);d.calculateOffsetTop();d.manipulateEement(function(e){e.css("left",0)});c.column.recalculateElement(d);c.column.checkNoteOffsets(d.model);c.column.onNoteAdd.call(this,d,true)}}function r(g,c,e,f){var d=z(g);return b.ColumnView.validateNote(g.model,d+b.ColumnInfo.pixelsToTime(c),e.get("duration"),e.get("id"),f)}var v=function(c){c.draggable({revert:true})};var E=$(s.draggable).attr("data-note");var D=$(s.draggable).attr("data-column");var x=$(s.draggable).attr("data-day-id");var A=$(s.draggable).attr("data-category");var w=null;var y=B.view.model.getNote(E);if(y){var t=s.position.top-B.view.grid.topBuffer.duration;y.onDragStopParameters={categoryId:A,column:B.view,dayId:x,date:B.date,top:t,currentColumn:w};var F=false;if(F=r(B.view,t,y,B.view.calendarView.options.date)){F=true;y.onDragStop=u()}if(!F){v(s.draggable);return false}return true}else{v(s.draggable);return false}}})};