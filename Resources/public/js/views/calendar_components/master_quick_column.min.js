function initializeMasterQuickColumn(a){a.MasterQuickColumn=a.ColumnView.extend({offsetTop:0,height:0,initialize:function(b){this.interfaces=[];this.grid={};this.notes=[];this.buffers=[];this.calendarInfo=b.calendarInfo;this.calendarView=b.calendarView;if(b.date){this.date=b.date}else{this.date=this.calendarView.options.date}this.model=b.model;this.onNoteAdd=b.onNoteAdd},noteSetParameters:function(b,d,c){b.set("salon",this.model.get("id"));b.set("date",this.calendarView.options.date);b.set("duration",d);b.set("fromTime",c);b.set("bySite",this.calendarView.options.bySite);b.set("owner",this.model);b.get("serviceData")["postName"]=this.model.get("name")},initializeNote:function(b,d,c){if(a.ColumnView.validateNote(this.model,d,c,null,this.calendarView.options.date)){this.noteSetParameters(b,c,d);return this.initializeAddNoteView(b)}},addNote:function(f,c){f.preventDefault(true);f.stopPropagation(true);var g=a.ColumnInfo.pixelsToTime(a.ColumnView.getDistance(f));var d=c.column.view.model.get("timeFrom")+g-g%15;if(!c.data.currentNoteView){var b=c.column.view.initializeNote(c.data.currentNote,d,c.column.view.getDefaultDuration(c))}else{c.column.view.noteSetParameters(c.data.currentNote,c.column.view.getDefaultDuration(c),d);var b=c.data.currentNoteView}if(b){c.column.showPopup=true;c.column.view.openedPopupsCount++;c.column.view.onNoteAdd.call(this,b,c.view,c.column.view)}},calculateBuffers:function(){_.each(this.buffers,function(){this.buffers.pop()}.bind(this));delete this.grid.topBuffer;delete this.grid.bottomBuffer;var f=this.interfaces[0];var d=this.model.get("schedule").get("workDays")[this.calendarInfo.get("currentDay").get("dayId")-1];var e=this.toTime;if(!e){e=d.get("timeTo")}var c=this.fromTime;if(!c){c=d.get("timeFrom")}var b=a.ColumnInfo.timeToPixels(e-c);if(d.get("active")&&this.calendarInfo.get("schedule").checkSupply(this.date)){this.height=b;if(!this.fromTime){this.offsetTop=a.ColumnInfo.timeToPixels(c-this.calendarInfo.get("currentDay").get("fromTime"))}this.grid.topBuffer={top:0,duration:0};this.model.set("timeFrom",c);this.grid.bottomBuffer={top:b,duration:0};this.model.set("timeTo",e);f.show=true}else{f.show=false}},drag:function(b,c,d){a.MasterQuickColumn.onDrag(b,c,d)}},{onDrag:function(f,e,o){function h(r){var s=0;if(!r.calendarView.fromTime){s=r.calendarInfo.get("currentDay").get("fromTime")}else{s=r.calendarView.fromTime}if(s<r.model.get("timeFrom")){s=r.model.get("timeFrom")}return s}function q(r,s){var t=h(s.column);r.calculateTime(s.top,t)}function m(){return function(r,s){q(r,s);r.calculateOffsetTop();r.manipulateEement(function(t){t.css("left",0)});s.column.recalculateElement(r);s.column.checkNoteOffsets(r.model);s.column.onNoteAdd.call(this,r)}}function p(r,v,t,s){var u=h(r);return a.ColumnView.validateNote(r.model,u+a.ColumnInfo.pixelsToTime(v),t.get("duration"),t.get("id"),s)}var l=function(r){r.draggable({revert:true})};var c=$(o.draggable).attr("data-note");var d=$(o.draggable).attr("data-column");var j=$(o.draggable).attr("data-day-id");var g=$(o.draggable).attr("data-category");var i=null;var k=null;i=f.view.model.getNote(c);if(i){var n=o.position.top-f.view.grid.topBuffer.duration;i.onDragStopParameters={categoryId:g,column:f.view,dayId:j,date:f.date,top:n,currentColumn:k};var b=false;if(p(f.view,n,i,f.view.calendarView.options.date)){b=true;i.onDragStop=m()}if(!b){l(o.draggable);return false}return true}else{l(o.draggable);return false}}})};