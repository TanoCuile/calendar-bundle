if(!window.MainElements){window.MainElements={}}if(!window.MainElements.initAppCallStack){window.MainElements.initAppCallStack=[]}window.MainElements.initAppCallStack.push(function(a){a.factory("ColumnManager",["DateManager",function(c){var b=function(d){angular.extend(this,d);this.display={};this.setWorkDay=function(h,g,f){if(h){var i=h.timeFrom<g?g:h.timeFrom;var e=h.timeTo>f?nominalDay.timeTo:f;this.display.height=c.timeToPixels(e-i);this.display.top=c.timeToPixels(h.timeFrom<=i?0:h.timeFrom-i)}else{this.display.height=100}}};return{prepareColumn:function(d){return new b(d)},columnsReorder:function(){},toggleColumn:function(d){}}}]);a.factory("ServicesHierarchyManager",[function(){return{toggleCategory:function(){}}}]);a.factory("CalendarData",["ColumnManager","ServicesHierarchyManager",function(g,b){function f(i){var h=null;if(!i.account){h="Set main account data"}if(!i.columns){h="Set columns for display"}if(!i.servicesHierarchy){h="Set services hierarchy"}if(h){throw {message:h,value:i}}}function d(){angular.forEach(e.servicesHierarchy,function(h){h.active=true;h.columns={};h.columnsOrder=[];h.weekData={}})}function c(){angular.forEach(e.columns,function(i,j){e.columns[j]=new g.prepareColumn(i);i=e.columns[j];console.log("C",i);var h={};angular.forEach(i.categories,function(k){h[k]={};e.servicesHierarchy[k].columns[i.id]=i;i.weight=Object.keys(e.servicesHierarchy[k].columns).length;angular.forEach(i.types,function(l){if(e.servicesHierarchy[k].types[l]){angular.forEach(i.jobTypes,function(m){if(e.servicesHierarchy[k].types[l].jobTypes[m]){h[k][m]=e.servicesHierarchy[k].types[l].jobTypes[m];if(!e.servicesHierarchy[k].types[l].jobTypes[m].columns){e.servicesHierarchy[k].types[l].jobTypes[m].columns={}}e.servicesHierarchy[k].types[l].jobTypes[m].columns[i.id]=i}})}})});i.jobs=h})}var e={weekMode:false,view:{dayStyle:{},weekStyle:{},dayTimeSections:{},weekTimeSections:{}}};window.getCalendarData(e);f(e);d();c();return e}])});