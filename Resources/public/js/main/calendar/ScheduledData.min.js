if(!window.MainElements){window.MainElements={}}if(!window.MainElements.initAppCallStack){window.MainElements.initAppCallStack=[]}MainElements.initAppCallStack.push(function(a){a.factory("ScheduledDataFactory",["NoteManager","DateManager",function(b,d){var c=function(e,f){this.day=e;this.column=f;this.plates={};this.notes={};this.createNote=function(h,i){var g=b.prepareNote(b.getDefaultNoteInfo());g.blank=this;g.setDuration(i);g.setFromTime(h);this.notes[g.id]=g};this.getPlanStart=function(){return this.column.getTopBoundary()};this.checkPlane=function(p,l,h){var g=true;if(this.column.getTopBoundary()>p){return false}if(this.column.getBottomBoundary()<p+l){return false}var q=0;var i=0;var j=false;var k=false;var o=p+d.timeSectionDuration;var n=p+l;var m=p+l- -d.timeSectionDuration;angular.forEach(this.notes,function(r){if(!g){return null}if(h&&r.id!==h){q=r.getFromTime();i=r.getDuration()+q;if((q<o&&i>o)||(q<m&&i>m)){g=false}if(q<p&&i>p){j=true}if(q<m&&i>m){k=true}if(k&&j){g=false}}});if(!g){return false}if(k){return 3}else{if(j){return 2}}return true}};return{generateScheduledBlanks:function(e,f){var g={};angular.forEach(f,function(h,i){g[i]=new c(e,h)});return g},setNotes:function(e){}}}])});